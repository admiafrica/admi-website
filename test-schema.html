<!DOCTYPE html>
<html>
<head>
    <title>Schema Testing Tool</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        textarea { width: 100%; height: 300px; margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; background: #007cba; color: white; border: none; cursor: pointer; }
        .result { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffebee; border-left: 4px solid #f44336; }
        .success { background: #e8f5e8; border-left: 4px solid #4caf50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Local Schema Testing Tool</h1>
        
        <h2>Step 1: Extract Schema from Your Page</h2>
        <p>1. Open your course page: <code>http://localhost:3000/courses/sound-engineering-diploma</code></p>
        <p>2. Open DevTools Console (F12) and run:</p>
        <textarea readonly>
// Extract all schemas
const schemas = [];
document.querySelectorAll('script[type="application/ld+json"]').forEach((script, i) => {
  try {
    const data = JSON.parse(script.innerHTML);
    schemas.push(data);
    console.log(`Schema ${i+1}:`, JSON.stringify(data, null, 2));
  } catch(e) { 
    console.error(`Schema ${i+1} error:`, e); 
  }
});

// Copy this to clipboard for testing
copy(JSON.stringify(schemas.find(s => s['@type'] === 'Course'), null, 2));
console.log('‚úÖ Course schema copied to clipboard!');
        </textarea>
        
        <h2>Step 2: Paste Schema Here for Validation</h2>
        <textarea id="schemaInput" placeholder="Paste your Course schema JSON here..."></textarea>
        <br>
        <button onclick="validateSchema()">üîç Validate Schema</button>
        <button onclick="clearResults()">üóëÔ∏è Clear</button>
        
        <div id="results"></div>
        
        <h2>Step 3: Test Online</h2>
        <p>Copy the validated JSON above and test it on:</p>
        <ul>
            <li><a href="https://validator.schema.org/" target="_blank">Schema.org Validator</a> (Code tab)</li>
            <li><a href="https://search.google.com/test/rich-results" target="_blank">Google Rich Results Test</a> (Code tab)</li>
        </ul>
    </div>

    <script>
        function validateSchema() {
            const input = document.getElementById('schemaInput').value.trim();
            const resultsDiv = document.getElementById('results');
            
            if (!input) {
                resultsDiv.innerHTML = '<div class="result error">‚ùå Please paste schema JSON first</div>';
                return;
            }
            
            try {
                const schema = JSON.parse(input);
                let results = '<div class="result success"><h3>‚úÖ Valid JSON Schema</h3>';
                
                // Basic validation
                if (schema['@type'] === 'Course') {
                    results += '<p>‚úÖ Course type detected</p>';
                    
                    // Check for removed properties
                    if (schema.creditHours) {
                        results += '<p>‚ùå Found creditHours property (should be removed)</p>';
                    } else {
                        results += '<p>‚úÖ creditHours property correctly removed</p>';
                    }
                    
                    if (schema.hasCourseInstance?.instructor) {
                        results += '<p>‚ùå Found instructor property (should be removed)</p>';
                    } else {
                        results += '<p>‚úÖ instructor property correctly removed</p>';
                    }
                    
                    // Check required properties
                    const required = ['@context', '@type', 'name', 'description', 'provider'];
                    const missing = required.filter(prop => !schema[prop]);
                    
                    if (missing.length > 0) {
                        results += `<p>‚ùå Missing required properties: ${missing.join(', ')}</p>`;
                    } else {
                        results += '<p>‚úÖ All required properties present</p>';
                    }
                    
                    results += `<p>üìã Properties found: ${Object.keys(schema).join(', ')}</p>`;
                } else {
                    results += `<p>‚ÑπÔ∏è Schema type: ${schema['@type']}</p>`;
                }
                
                results += '</div>';
                resultsDiv.innerHTML = results;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="result error">‚ùå Invalid JSON: ${error.message}</div>`;
            }
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('schemaInput').value = '';
        }
    </script>
</body>
</html>
